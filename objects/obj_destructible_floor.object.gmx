<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_rock_floor_distructible</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>obj_delete_parent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Setup Variables
//Create tile collision mask
tile = tile_add(tile_flat_24,0,0,128,32,x,y,0)
tile_set_visible(tile,false)
//Setup animation variables
frame = 0
timer = 0
offset = 0
user_tile_boundary_fade_direction = 0
user_tile_boundary_alpha = 0
user_tile_boundary_fade_direction = 1
give_item = 0
item = 0
attacked = 0
attacked_damage = 4
validate_timer = 0
validate_timer_max = 60
if room != rm_editor
    validate_timer_max = 4;
destroyed = 0
destroyed_particle_start = 0
destroyed_particle_frame[0] = 0
destroyed_particle_frame[1] = -2
destroyed_particle_frame[2] = -4
particle[0] = spr_rock_broken_0
particle[1] = spr_rock_broken_0
particle[2] = spr_rock_broken_0
particle[3] = spr_rock_broken_0
particle[4] = spr_rock_broken_0
broke_sound = snd_rock_destroyed
respawn_self = obj_destructible_floor
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Delete Our Collision Mask If We Were Destroyed Prematurely
if tile_exists(tile) tile_delete(tile);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Hurt the player if they are within our attack range
if obj_game_logic.pause = 0
    {
        if (obj_game_logic.px &gt;= x and obj_game_logic.px &lt;= x+128
        and obj_game_logic.py &gt;= y-4 and obj_game_logic.py &lt;= y+32
        and destroyed = 0 and destroyed_particle_start = 0
        and obj_game_logic.user_cursor_mode = 0)
            {
                timer += 1
                offset += 2
                if offset &gt; 4
                    offset = -2;
                if timer &gt; 32
                    {
                        //Create Gem Particles If Our Performance Profile Is Set To "Normal"
                        if obj_game_logic.performance_profile = 1 and instance_number(obj_destructible_particle) &lt; 16
                            {
                                if frame = 1
                                    {
                                        particle[0] = spr_brick_broken_0
                                        particle[1] = spr_brick_broken_1
                                        particle[2] = spr_brick_broken_0
                                        particle[3] = spr_brick_broken_1
                                        particle[4] = spr_brick_broken_0
                                    }
                                scr_attack_shield_ext(x,y+16,obj_destructible_particle,0,particle[0],-4  ,1,1,-4)
                                scr_attack_shield_ext(x+16,y+12,obj_destructible_particle,0,particle[1],-2,1,1,-5.25)
                                scr_attack_shield_ext(x+32,y+8,obj_destructible_particle,0,particle[2],-1  ,1,1,-5.625)
                                scr_attack_shield_ext(x+64,y+12,obj_destructible_particle,0,particle[3],0   ,1,1,-7.5)
                                scr_attack_shield_ext(x+80,y+8,obj_destructible_particle,0,particle[4],2,1,1,-6)
                                scr_attack_shield_ext(x+96,y+12,obj_destructible_particle,0,particle[3],0   ,1,1,-7.5)
                                scr_attack_shield_ext(x+112,y+16,obj_destructible_particle,0,particle[3],0   ,1,1,-5.625)
                            }
                        audio_play_sound(broke_sound,50,false)
                        if tile_exists(tile) tile_delete(tile);
                        if room != rm_editor destroyed_particle_start = 1;
                        else                 destroyed = 1;
                    }
            }
        else
            {
                timer = 0;
                offset = 0;
            }

        validate_timer += 1
        if validate_timer &gt; validate_timer_max
            {
                //Validate tile-set
                if instance_exists(obj_bg_city)             frame = 1;
                if instance_exists(obj_bg_logic_night)      frame = 0;
                if instance_exists(obj_bg_logic)            frame = 0;
                if instance_exists(obj_bg_logic_nighttime)  frame = 0;
                if instance_exists(obj_bg_logic_alt)        frame = 0;
                if instance_exists(obj_bg_logic_lagoon)     frame = 0;
                if instance_exists(obj_bg_city_day)         frame = 1;
                if instance_exists(obj_bg_space)            frame = 0;
                if instance_exists(obj_bg_logic_mnt)        frame = 0;
                if instance_exists(obj_bg_city_sewers)      frame = 1;
                if instance_exists(obj_bg_logic_mnt_nite)   frame = 0;
                if room = rm_editor
                    validate_timer = 0;
                else
                    {
                        validate_timer = 0
                        validate_timer_max = 240
                    }
            }
        
        if room = rm_editor
            {
                if destroyed &gt; 0
                    {
                        destroyed_particle_start = 1
                        destroyed += 1;
                        if destroyed &gt; 60
                            {
                                instance_create(x,y,respawn_self)
                                instance_destroy();
                            }
                    }
            }
        else
            {
                if destroyed_particle_start = 1
                    {
                        if destroyed_particle_frame[2] &gt; 7.8
                            instance_destroy();
                    }
            }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Sprite Animations
if destroyed = 0 and destroyed_particle_start = 0
    draw_sprite(sprite_index,frame,x,y+offset);

if destroyed_particle_start = 1
    {
        destroyed_particle_frame[0] += 0.24
        destroyed_particle_frame[1] += 0.24
        destroyed_particle_frame[2] += 0.24
        if destroyed_particle_frame[0] &gt; 0 and destroyed_particle_frame[0] &lt; 7.8
            draw_sprite(spr_explosion_1,destroyed_particle_frame[0],x+42,y+8);
        if destroyed_particle_frame[1] &gt; 0 and destroyed_particle_frame[1] &lt; 7.8
            draw_sprite(spr_explosion_1,destroyed_particle_frame[1],x+84,y+16);
        if destroyed_particle_frame[2] &gt; 0 and destroyed_particle_frame[2] &lt; 7.8
            draw_sprite(spr_explosion_1,destroyed_particle_frame[2],x+126,y+24);
    }

if room = rm_editor
    {
        var parent = obj_level_editor;
        if (point_in_rectangle(parent.use_cursor_x,parent.use_cursor_y,x,y,x+128,y+32)
            and parent.user_cursor_mode = 0 and parent.use_tile_menu = 0)
            {
                //Fade Effect For The Sprite's Boundary Box
                if user_tile_boundary_fade_direction = 1 user_tile_boundary_alpha += 0.0075;
                if user_tile_boundary_fade_direction = 0 user_tile_boundary_alpha -= 0.0075;
                if user_tile_boundary_alpha &gt; 0.8 user_tile_boundary_fade_direction = 0;
                if user_tile_boundary_alpha &lt; 0.3 user_tile_boundary_fade_direction = 1;
                draw_set_blend_mode(bm_add)
                draw_sprite_ext(sprite_index,0,x,y,1,1,0,c_yellow,user_tile_boundary_alpha)
                draw_set_blend_mode(bm_normal)
            }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
