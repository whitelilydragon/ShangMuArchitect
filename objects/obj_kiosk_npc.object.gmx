<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_potion_shop_spawn_point</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-5</depth>
  <persistent>0</persistent>
  <parentName>obj_npc_parent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
npc_name = "Help Kiosk"
npc_speed = 0.12
draw_set_font(o.text_font_academy);
npc_dialog_string_p1 = "Welcome to Shang Mu Railway!"
npc_dialog_string_p2 = ""
npc_dialog_string = npc_dialog_string_p1
npc_emotion_idle  = spr_npc_terminal_idle
npc_emotion_happy = spr_npc_terminal_idle
npc_emotion_angry = spr_npc_terminal_idle
npc_emotion_sad   = spr_npc_terminal_idle
npc_emotion_sus   = spr_npc_terminal_idle
npc_talk_while_idle = 1
npc_shopkeeper_gui = 0
npc_talk_voice = snd_text_male
sprite_index = spr_npc_terminal_idle
npc_emotion_index = 0
tail_frame = 0
npc_direction = -1
shop_input_up = 0
shop_input_down = 0
shop_input_accept = 0
shop_double_click = 0
shop_mouse_previous_y = 0
shop_x_offset = 168
shop_y_select = 0
shop_y_offset = 0
shop_player_frame = 0
shop_refresh_timer = 0
shop_allowed_input_timer = 0
shop_confirmed_purchase = 0
shop_confirmed_purchase_shards = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>obj_game_logic.shop_menu_movement_override = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
if o.pause = 0 and state = 1
    {
        shop_refresh_timer = 0
        shop_allowed_input_timer += 1
        if shop_allowed_input_timer &gt; 30
            {
                if o.anim_current = o.anim_standing
                    shop_player_frame = o.frame;
                //Disable movement during mouse movement mode
                if o.joy_mouse_button_switch = 1
                    o.shop_menu_movement_override = 1;
                else
                    o.shop_menu_movement_override = 0;
                //Shop Inputs
                if (o.joy_input[0,3] = 1) shop_input_up += 1; else shop_input_up = 0;
                if (o.joy_input[0,1] = 1) shop_input_down += 1; else shop_input_down = 0;
                if o.joy_input[1,0] = 1 shop_input_accept += 1; else shop_input_accept = 0;
                //Shop Selections
                if shop_input_up = 1
                    {
                        shop_y_select -= 1;
                        if shop_y_select &lt; 0
                            shop_y_select = 6;
                    }
                if shop_input_down = 1
                    {
                        shop_y_select += 1;
                        if shop_y_select &gt; 6
                            shop_y_select = 0;
                    }
                if (o.joy_mouse_button_switch = 1)
                    {
                        //Click Menu Elements
                        if mouse_check_button_pressed(o.joy_mouse_button_left)
                            {
                                if (device_mouse_x_to_gui(0) &gt; 259 and device_mouse_x_to_gui(0) &lt; 414)
                                    {
                                        if (device_mouse_y_to_gui(0) &gt; 36 and device_mouse_y_to_gui(0) &lt; 50)
                                            {
                                                shop_y_select = 0;
                                                shop_mouse_previous_y = 0
                                                shop_double_click += 1
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 52 and device_mouse_y_to_gui(0) &lt; 66)
                                            {
                                                shop_y_select = 1;
                                                shop_mouse_previous_y = 1
                                                shop_double_click += 1
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 70 and device_mouse_y_to_gui(0) &lt; 84)
                                            {
                                                shop_y_select = 2;
                                                shop_mouse_previous_y = 2
                                                shop_double_click += 1
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 86 and device_mouse_y_to_gui(0) &lt; 100)
                                            {
                                                shop_y_select = 3;
                                                shop_mouse_previous_y = 3
                                                shop_double_click += 1
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 102 and device_mouse_y_to_gui(0) &lt; 118)
                                            {
                                                shop_y_select = 4;
                                                shop_mouse_previous_y = 4
                                                shop_double_click += 1
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 120 and device_mouse_y_to_gui(0) &lt; 136)
                                            {
                                                shop_y_select = 5;
                                                shop_mouse_previous_y = 5
                                                shop_double_click += 1
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 140 and device_mouse_y_to_gui(0) &lt; 154)
                                            {
                                                shop_y_select = 6;
                                                shop_mouse_previous_y = 6
                                                shop_double_click += 1
                                            }
                                    }
                            }
                        //Double Click Safety Checks
                        if !mouse_check_button(o.joy_mouse_button_left)
                            {
                                if (device_mouse_x_to_gui(0) &gt; 259 and device_mouse_x_to_gui(0) &lt; 414)
                                    {
                                        if (device_mouse_y_to_gui(0) &gt; 36 and device_mouse_y_to_gui(0) &lt; 50)
                                            {
                                                if shop_y_select != 0
                                                    shop_double_click = 0;
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 52 and device_mouse_y_to_gui(0) &lt; 66)
                                            {
                                                if shop_y_select != 1
                                                    shop_double_click = 0;
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 70 and device_mouse_y_to_gui(0) &lt; 84)
                                            {
                                                if shop_y_select != 2
                                                    shop_double_click = 0;
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 86 and device_mouse_y_to_gui(0) &lt; 100)
                                            {
                                                if shop_y_select != 3
                                                    shop_double_click = 0;
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 102 and device_mouse_y_to_gui(0) &lt; 118)
                                            {
                                                if shop_y_select != 4
                                                    shop_double_click = 0;
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 120 and device_mouse_y_to_gui(0) &lt; 136)
                                            {
                                                if shop_y_select != 5
                                                    shop_double_click = 0;
                                            }
                                        if (device_mouse_y_to_gui(0) &gt; 140 and device_mouse_y_to_gui(0) &lt; 154)
                                            {
                                                if shop_y_select != 6
                                                    shop_double_click = 0;
                                            }
                                    }
                            }
                        if shop_double_click &gt; 2
                            shop_double_click = 0;
                    }
                if (shop_input_up = 1 or shop_input_down = 1
                or (mouse_check_button_pressed(o.joy_mouse_button_left) and shop_double_click = 1))
                    {
                        //Shop Dialog
                        draw_set_font(o.text_font_academy);
                        switch(shop_y_select)
                            {
                                case 0: {scr_set_npc_strings(string_wordwrap_width("You're in the center of Shang Mu!",148,"#",true),string_wordwrap_width("This station is linked to every hub in the region.",148,"#",true)); break;}
                                case 1: {scr_set_npc_strings(string_wordwrap_width("Trains here will take you elsewhere in Shang Mu.",148,"#",true),string_wordwrap_width("Taking a train anywhere will take you back here!",148,"#",true)); break;}
                                case 2: {scr_set_npc_strings(string_wordwrap_width("Stages are always located at the far right in hubs.",148,"#",true),""); break;}
                                case 3: {scr_set_npc_strings(string_wordwrap_width("Missions are bonus stages given by other people!",148,"#",true),string_wordwrap_width("You can replay them any time to collect gems!",148,"#",true)); break;}
                                case 4: {scr_set_npc_strings(string_wordwrap_width("A shopkeeper can be found in every hub.",148,"#",true),string_wordwrap_width("(Sometimes they are hidden in stages, too!)",148,"#",true)); break;}
                                case 5: {scr_set_npc_strings(string_wordwrap_width("Petal gems are dropped by every robot in Shang Mu.",148,"#",true),string_wordwrap_width("Shopkeepers let you redeem them for certain goods!",148,"#",true)); break;}
                                case 6: {scr_set_npc_strings(string_wordwrap_width("Do you need more assistance?",148,"#",true),""); break;}
                            }
                        npc_emotion_index = 0
                        audio_play_sound(pause_select,50,false);
                    }
                //Cursor
                switch(shop_y_select)
                    {
                        case 0: {shop_y_offset = 36; break;}
                        case 1: {shop_y_offset = 53; break;}
                        case 2: {shop_y_offset = 70; break;}
                        case 3: {shop_y_offset = 87; break;}
                        case 4: {shop_y_offset = 104; break;}
                        case 5: {shop_y_offset = 121; break;}
                        case 6: {shop_y_offset = 140; break;}
                    }
            }
    }
if state = 0
    {
        shop_refresh_timer += 1
        if shop_refresh_timer &gt; 8
            {
                shop_y_select = 0
                shop_y_offset = 36
                shop_x_offset = 168
                npc_emotion_index = 0
                shop_refresh_timer = 0
                shop_allowed_input_timer = 0
                shop_double_click = 0
                shop_mouse_previous_y = 0
                o.shop_menu_movement_override = 0
                draw_set_font(o.text_font_academy);
                npc_dialog_string_p1 = string_wordwrap_width("Welcome to Shang Mu Railway!",148,"#",true)
                npc_dialog_string_p2 = ""
                npc_dialog_string = npc_dialog_string_p1
                npc_name = "Help Kiosk"
                npc_emotion_idle  = spr_npc_terminal_idle
                npc_emotion_happy = spr_npc_terminal_idle
                npc_emotion_angry = spr_npc_terminal_idle
                npc_emotion_sad   = spr_npc_terminal_idle
                npc_emotion_sus   = spr_npc_terminal_idle
                npc_talk_voice = snd_text_male
                sprite_index = spr_npc_terminal_idle
            }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
//Draw Shopkeeper GUI
if state = 1
    {
        shop_x_offset = lerp(shop_x_offset,0,0.10);
        draw_sprite_stretched_ext(spr_water,0,261+shop_x_offset,11,152,149,c_white,0.80)
        draw_sprite_part(spr_npc_dialoge_box,0,0,0,156,26,259+shop_x_offset,8)    //Top-Cut-Of-Box
        draw_sprite_part(spr_npc_dialoge_box,0,0,4,156,26,259+shop_x_offset,34)   //Middle-White-Cut
        draw_sprite_part(spr_npc_dialoge_box,0,0,4,156,26,259+shop_x_offset,58)   //Middle-White-Cut
        draw_sprite_part(spr_npc_dialoge_box,0,0,4,156,26,259+shop_x_offset,62)   //Middle-White-Cut
        
        draw_sprite_part(spr_npc_dialoge_box,0,0,27,156,24,259+shop_x_offset,86)  //Middle-Yellow-Cut
        draw_sprite_part(spr_npc_dialoge_box,0,0,27,156,24,259+shop_x_offset,110) //Middle-Yellow-Cut
        draw_sprite_part(spr_npc_dialoge_box,0,0,27,156,24,259+shop_x_offset,134) //Middle-Yellow-Cut
        draw_sprite_part(spr_npc_dialoge_box,0,0,51,156,5,259+shop_x_offset,158) //Bottom-Cut-Of-Box

        if shop_allowed_input_timer &gt;= 30
            draw_sprite(spr_font_academy,29,260+shop_x_offset,shop_y_offset);
        //Shop Items Text
        draw_set_font(o.text_font_academy)
        draw_set_color(c_white)
        draw_set_halign(fa_left)
        draw_text(270+shop_x_offset,18,"Information Kiosk")
        draw_text(270+shop_x_offset,37,"Where am I?")
        draw_text(270+shop_x_offset,54,"Using Trains?")
        draw_text(270+shop_x_offset,71,"Finding Stages")
        draw_text(270+shop_x_offset,88,"Missions")
        draw_text(270+shop_x_offset,105,"Shopkeepers")
        draw_text(270+shop_x_offset,122,"Petal gems")
        draw_text(270+shop_x_offset,141,"Exit")
        //Accept Dialogue Prompt
        if npc_interface_switch_control_type = 0 draw_sprite(spr_keyboard_font,o.key_a,395+shop_x_offset,155);
        else                                     draw_background(o.user_joystick_a,395+shop_x_offset,155);
        draw_text(346+shop_x_offset,155,"Accept")
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
